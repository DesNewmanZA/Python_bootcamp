{% extends "base.html" %}
{% block content %}
<div class="container">
  <h1>Your cart</h1>

  {% if items %}
  <div class="row justify-content-left">
    <div class="col-4 col-md-6 col-lg-4">

      <table class="table align-middle">
        <thead>
          <tr>
            <th style="width: 150px;">Product</th>
            <th style="width: 150px;">Quantity</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for item in items %}
          <tr>
            <td>{{ item.product.name }}</td>

            <td>
              <form method="POST" action="{{ url_for('update_cart') }}" class="d-flex">
                <input type="hidden" name="product_id" value="{{ item.product.id }}">
                <input
                  type="number"
                  name="quantity"
                  value="{{ item.quantity }}"
                  min="0"
                  class="form-control me-2"
                >
                <button type="submit" class="btn btn-brand btn-sm">
                  Update
                </button>
              </form>
            </td>

            <td>
              <form method="POST" action="{{ url_for('update_cart') }}">
                <input type="hidden" name="product_id" value="{{ item.product.id }}">
                <input type="hidden" name="quantity" value="0">
                <button type="submit" class="btn btn-danger btn-sm">
                  Remove
                </button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      <p class="fw-bold">
        Total: R{{ "%.2f"|format(total_cents / 100) }}
      </p>

      <a href="{{ url_for('checkout') }}" class="btn btn-brand">
        Checkout
      </a>

    </div>
  </div>
  {% else %}
    <p>Your cart is empty.</p>
  {% endif %}
</div>
{% endblock %}